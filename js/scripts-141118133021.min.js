function readCookie(e) {
    var t = e + "=",
        n = document.cookie.split(";");
    for (var r = 0; r < n.length; r++) {
        var i = n[r];
        while (i.charAt(0) == " ") i = i.substring(1, i.length);
        if (i.indexOf(t) == 0) return i.substring(t.length, i.length)
    }
    return null
}

function ratingServiceCallback(e) {
    var t = $("#pegi-rating, #pegi-info"),
        n = $("#ESRB-rating");
    e.rating == "esrb" ? t.hide() : n.hide()
}
$(function() {
        site.setUpMenu(), site.videoSkin(), site.socialMediaHover(), site.openVideoOverlay(),
            site.doSimpleTabs(), site.ratingLogos(), $(".no-touch #main").ccpimagepopup(),
            $("input:text[placeholder]").placeholderLabel(), $(
                ".signup-form form").signupformvalidation(), $(
                "body.expansion").length > 0 && function() {
                function e() {
                    if ($(".popover").length === 0 || $(".popover").width() <
                        200) {
                        setTimeout(e, 50);
                        return
                    }
                    $(".popover").css("left", ($(window).width() - $(
                        ".popover").width()) / 2)
                }
                $("img.lightbox").each(function() {
                    var t = $(this),
                        n = this.src.replace(".jpg", "") +
                        "-big.jpg";
                    t.attr("data-original", '{"url": "' + n +
                        '", "alt": "' + this.alt +
                        '", "title": "' + this.alt + '"}'), t.click(
                        function() {
                            setTimeout(e, 50)
                        })
                })
            }()
    }), $("#nav-toggle").on("click", function(e) {
        var t = $("html"),
            n = $(".main-content"),
            r = "menu-open";
        e.preventDefault(), e.stopPropagation(), t.hasClass(r) ? (t.removeClass(
            r), n.off("click.navigation")) : (t.addClass(r), n.on(
            "click.navigation", function(e) {
                e.preventDefault(), t.removeClass(r), n.off(
                    "click.navigation")
            }))
    }), $("#mainnav > ul > li").each(function() {
        $(this).has("ul").length && $(this).append(
            '<i class="fa fa-chevron-down"></i>')
    }), $("#mainnav i").on("click", function(e) {
        var t = $("html");
        if (t.hasClass("menu-open") && $(this).prev("ul").length) {
            var n = $("#mainnav li"),
                r = $(".main-content"),
                i = "submenu-open";
            e.preventDefault(), e.stopPropagation(), $(this).parent().hasClass(
                i) ? $(this).parent().removeClass(i) : (n.removeClass(i),
                $(this).parent().addClass(i), r.on("click.navigation",
                    function(e) {
                        e.preventDefault(), n.removeClass(i), r.off(
                            "click.navigation")
                    }))
        }
    }), window.log = function() {
        log.history = log.history || [], log.history.push(arguments), this.console &&
            console.log(Array.prototype.slice.call(arguments))
    },
    function(e, t) {
        var n, r = e.getElementsByTagName(t)[0],
            i = e.createDocumentFragment(),
            s = function(r, s) {
                if (e.getElementById(s)) return;
                n = e.createElement(t), n.src = r, n.async = !0, s && (n.id = s),
                    i.appendChild(n)
            };
        s(""), r.parentNode.insertBefore(
            i, r)
    }(document, "script");
var site = function(e) {
    return {
        setUpMenu: function() {
            var t = e("#header nav > ul > li.selected");
            e("#header nav > ul").hover(function() {
                t.toggleClass("selected", !t.hasClass(
                    "selected"))
            }, function() {
                t.addClass("selected")
            })
        },
        videoSkin: function() {
            if (Modernizr.video && !Modernizr.touch && !e(
                "body#landing")) {
                var t = e("video").videoSkin({
                        theme: "eveonline-floating",
                        wrap: !0,
                        fullscreenSupported: Modernizr.fullscreen,
                        volume: localStorage["videoskin-volume"] ?
                            parseFloat(localStorage[
                                "videoskin-volume"]) : .5
                    }),
                    n = t.parents(".video-container"),
                    r = n.find(".video-skin"),
                    i = n.find(".video-sharing");
                t.bind("pause ended", function() {
                    !e("html").hasClass("videoskin-fullscreen") &&
                        !r.hasClass("dragging") && i.removeClass(
                            "visuallyhidden")
                }).bind("play", function() {
                    i.addClass("visuallyhidden")
                }).bind("fullscreen", function(e, t) {
                    r.hasClass("paused") && i.removeClass(
                        "visuallyhidden")
                }).bind("volumeChange", function(e, t) {
                    localStorage["videoskin-volume"] = t
                })
            }
        },
        socialMediaHover: function() {
            e("#footer .social-media a").hover(function() {
                e(this).parents(".social-media").find("h2").toggleClass(
                    "over")
            })
        },
        openVideoOverlay: function() {
            e('.no-touch [rel="div.videopopover"]').overlay({
                mask: {
                    color: "#000",
                    loadSpeed: 300,
                    opacity: .85,
                    onBeforeLoad: function() {
                        e.browser.msie && e.browser.version ==
                            9 && e("body").css("overflow-x",
                                "hidden")
                    },
                    onClose: function() {
                        e.browser.msie && e.browser.version ==
                            9 && e("body").css("overflow-x",
                                "visible")
                    }
                },
                closeOnClick: !0,
                closeOnEsc: !1,
                close: e(".popover-close"),
                onLoad: function() {
                    Modernizr.video ? this.getOverlay().find(
                            "video")[0].play() : this.getOverlay()
                        .find("#ytplayer")[0].playVideo()
                },
                onClose: function() {
                    Modernizr.video ? this.getOverlay().find(
                            "video")[0].pause() : this.getOverlay()
                        .find("#ytplayer")[0].pauseVideo()
                }
            });
            var t = e('.no-touch [rel="div.videopopover"]').data(
                "overlay");
            if (t) {
                function n(n) {
                    n.which == 27 && !e("html").hasClass(
                        ".videoskin-fullscreen") && t.close()
                }
                e(window).on("keyup.videooverlay", function(e) {
                    n(e)
                }), e(".video.no-touch video").on("fullscreen",
                    function(t, r) {
                        r ? e(window).off("keyup.videooverlay") : e(
                            window).on("keyup.videooverlay",
                            function(e) {
                                n(e)
                            }), e.mask.getMask().css("width",
                            "100%")
                    })
            }
        },
        doSimpleTabs: function() {
            e(".simpletabs").simpleTabs(), e(
                ".simpletabs > ul > li > a").click(function() {
                $parent = e(this).parent(), $parent.hasClass(
                    "selected") && $parent.siblings().removeClass(
                    "nobg").end().prev().addClass("nobg")
            })
        },
        forceSocialButtons: function() {
            try {
                FB.XFBML.parse(), twttr.widgets.load(), gapi.plusone.go()
            } catch (e) {}
        },
        ratingLogos: function() {
            var t = e("#footer .rating"),
                n = t.data("ratingurl"),
                r = readCookie("rating");
            if (!t.length || !n) return;
            if (r != null) ratingServiceCallback({
                rating: r
            });
            else {
                var i = document.createElement("script");
                i.src = n, t.after(i)
            }
        }
    }
}(jQuery);
$(function() {
    ($("body#eve-online").length || $("body#expansion").length) &&
    frontpage.hero(), $("body#eve-online").length && (frontpage.conflictUpdates(),
        frontpage.newSiteNotice())
});
var frontpage = function(e) {
    return {
        hero: function() {
            function i(e) {
                n.eq(e).addClass("selected").siblings().removeClass(),
                    t.animate({
                        left: 960 * e * -1
                    }, 300, "easeInOutQuint")
            }

            function s() {
                var e = n.length;
                n.eq(0).addClass("selected").siblings().removeClass(),
                    t.animate({
                        left: 960 * e * -1
                    }, 300, "easeInOutQuint", function() {
                        t.css("left", 0)
                    })
            }
            var t = e("#hero-wrapper"),
                n = e(".paging li"),
                r;
            if (n.length === 0) return;
            t.css("width", t.width() + 960), t.children(":first-child")
                .clone().removeAttr("id").appendTo(t), r = Timed.every(
                    "6s", function() {
                        var e = parseInt(n.filter(".selected").index());
                        e >= n.length - 1 ? s() : i(e + 1)
                    }), e("#hero").hover(function() {
                    r.cancel()
                }, function() {
                    r.start()
                }), e("#hero .paging a").click(function(n) {
                    n.preventDefault();
                    var r = e(this),
                        s = r.parent();
                    if (t.is(":animated")) return;
                    if (s.hasClass("selected")) return;
                    i(s.index())
                })
        },
        newSiteNotice: function() {
            var t = e("#new-site-notice"),
                n = t.find("#hide"),
                r = localStorage["show-new-site-notice"],
                i = parseInt(localStorage["new-site-notice-hit-count"]);
            if (r == "false") {
                t.hide();
                return
            }
            isNaN(i) && (i = 0), i >= 4 && (localStorage[
                "show-new-site-notice"] = "false"), localStorage[
                "new-site-notice-hit-count"] = i + 1, n.click(
                function() {
                    return t.slideUp("fast"), localStorage[
                        "show-new-site-notice"] = "false", !1
                })
        },
        conflictUpdates: function() {
            var t = e("#eve-live ul");
            t.append(t.clone().children("li")), Modernizr.cssanimations ||
                frontpage.conflictUpdatesScroll(t)
        },
        conflictUpdatesScroll: function(e) {
            e.animate({
                left: "-=" + e.width() / 2
            }, e.width() / .1, "linear", function() {
                e.css("left", 0), frontpage.conflictUpdatesScroll(
                    e)
            })
        }
    }
}(jQuery);
var universe = function(e) {
    var t;
    return {
        starmapSelectPrespecifiedSystem: function(e) {
            var t = window.location.search.replace("?", "");
            e.selectSystem(t)
        },
        starmapOnSystemSelected: function(t) {
            function l() {
                r.removeClass(function() {
                    return u + " " + a
                })
            }

            function c() {
                i.hide(), i.empty(), r.removeClass(o), l()
            }
            var n = e("#sidecontent"),
                r = n.children("#actions"),
                i = r.children("div"),
                s = n.find("#factsheet > div"),
                o = "has-images",
                u = "one-image",
                a = "two-images";
            s.children().length ? s.fadeOut(function() {
                s.empty().append(e("#starmapSystemInfo").tmpl(t))
                    .fadeIn()
            }) : (n.removeClass("closed"), s.append(e(
                "#starmapSystemInfo").tmpl(t)), n.addClass(
                "open")), e.ajax({
                url: "/universe/starmap-sideimages-handler/",
                data: {
                    tag: t.systemName.toLowerCase().replace(
                        / |-/ig, "")
                },
                dataType: "json",
                headers: {
                    "X-Reply-With": "CustomJSON"
                },
                success: function(t) {
                    t && t.images.length > 0 ? (i.hide(), r
                        .addClass(o), l(), t.images.length ==
                        1 ? r.addClass(u) : t.images.length ==
                        2 && r.addClass(a), i.empty().append(
                            e("#starmapRelatedImages").tmpl(
                                t)).fadeIn(function() {
                            universe.setUpImageCarousel()
                        })) : c()
                },
                error: function(e, t, n) {
                    c()
                }
            }), e("#close-sidecontent").is(":visible") || universe.initCloseButton();
            if (Modernizr.history) {
                var f = t.systemName.toLowerCase().replace(" ", "-");
                window.history.replaceState(null, t.systemName, "?" + f +
                    window.location.hash)
            }
        },
        starmapOnSystemDeselected: function() {
            var t = e("#sidecontent"),
                n = t.children("#actions"),
                r = n.children("div"),
                i = t.find("#factsheet > div");
            t.removeClass("open").addClass("closed"), Timed.after(400,
                function() {
                    i.empty(), r.empty(), n.removeClass(
                        "has-images")
                }), Modernizr.history && window.history.replaceState(
                null, "", "?"), universe.destroyCloseButton()
        },
        setUpImageCarousel: function() {
            e("#related-images ul li").length > 3 && (e(
                "#prev-image, #next-image").removeClass(
                "hidden"), e("#related-images").jCarouselLite({
                btnPrev: "#prev-image",
                btnNext: "#next-image",
                vertical: !0,
                circular: !1,
                visible: 3,
                mouseWheel: !0
            }).mousewheel(function(t, n) {
                var r = e(this).children("ul"),
                    i = r.css("top") == "auto" ? "0px" : r.css(
                        "top"),
                    s = parseInt(i.replace("px", "")),
                    o = e(this).height() - r.height();
                if (s == 0 || s == o) return t.preventDefault(), !
                    1
            }))
        },
        shipViewerListShips: function(n, r) {
            var i = n.getShipList(),
                s = {
                    group: {}
                },
                o = {
                    ships: []
                },
                u = e("#sidecontent #actions"),
                a = e("#ship-list-categorized"),
                f = e("#ship-list-flat");
            for (c in i) {
                var l = i[c];
                l.urlsafeName = l.name.toLowerCase().replace(" ", "-"),
                    typeof s.group[l.race] == "undefined" && (s.group[l
                        .race] = {
                        shipclass: {}
                    }), typeof s.group[l.race].shipclass[l.shipClass] ==
                    "undefined" && (s.group[l.race].shipclass[l.shipClass] = []),
                    o.ships.push(l), s.group[l.race].shipclass[l.shipClass]
                    .push(l)
            }
            o.ships = o.ships.sort(function(e, t) {
                    var n = e.name.toLowerCase(),
                        r = t.name.toLowerCase();
                    return n < r ? -1 : n > r ? 1 : 0
                }), e("#shipviewerFlatList").tmpl(o).appendTo(f.find(
                    ".antiscroll-inner")), e(
                    "#shipviewerCategorizedList").tmpl(s).appendTo(a.find(
                    ".antiscroll-inner")), u.find(".sort-options a").click(
                    function(t) {
                        t.preventDefault();
                        var n = e(this.hash);
                        if (n.is(":visible")) return;
                        n.show().siblings("div").hide(), e(this).parent()
                            .addClass("selected").siblings().removeClass(
                                "selected"), n.find(
                                ".antiscroll-scrollbar").length || (n.find(
                                    ".antiscroll-wrap").antiscroll(),
                                universe.shiplistMonitorScrolling())
                    }), u.find(".up, .down").click(function(t) {
                    t.preventDefault();
                    var n = u.find(".list:visible"),
                        r = n.find(".antiscroll-scrollbar"),
                        i = n.height() / 1.6,
                        s = e(this).is(".up") ? "+=" + i : "-=" + i;
                    n.find(".antiscroll-inner").stop().animate({
                        scrollTop: s
                    }, 400)
                }), e("#sidecontent #actions").toggleClass("closed"), e(
                    "#ship-list-categorized .antiscroll-wrap").antiscroll(),
                t = e("#ship-list-categorized .antiscroll-wrap").data(
                    "antiscroll"), universe.initCloseButton(), universe
                .initFullscreenButton(n), universe.shipviewerFullscreen(),
                universe.shiplistMonitorScrolling(), universe.shiplistInitCategorizedList()
        },
        shiplistInitCategorizedList: function() {
            var t = e("#shiplist-categorized"),
                n = t.children("li"),
                r = t.find("> li > ul"),
                i = r.find("> li"),
                s = i.find("> ul");
            r.not(".selected").hide(), s.not(".selected").hide(), n.add(
                i).click(function(t) {
                var n = e(this).children("ul");
                n.is(":visible") ? n.hide() : n.show(), t.stopPropagation()
            }), s.find("a").click(function(e) {
                e.stopPropagation()
            })
        },
        shiplistMonitorScrolling: function() {
            var t = e("#sidecontent #actions .list:visible"),
                n = t.find(".antiscroll-scrollbar");
            t.find(".antiscroll-inner").scroll(function() {
                var r = e(this),
                    i = t.find(".down"),
                    s = t.find(".up"),
                    o = parseInt(n.css("top")),
                    u = o + n.height() + 5;
                o <= 0 ? i.addClass("disabled") : u >= r.height() ?
                    s.addClass("disabled") : (i.removeClass(
                        "disabled"), s.removeClass(
                        "disabled"))
            })
        },
        initCloseButton: function() {
            e("#close-sidecontent").show().on(
                "click.SidecontentToggler", function() {
                    var t = e("#sidecontent");
                    e(this).toggleClass("closed"), t.toggleClass(
                        "open")
                })
        },
        destroyCloseButton: function() {
            e("#close-sidecontent").hide().off(
                "click.SidecontentToggler").removeClass("closed")
        },
        initFullscreenButton: function(t) {
            var n = e("#shipviewer-container, #starmap-container"),
                r = "shipviewer-starmap-fullscreen";
            e("#fullscreen-toggle").click(function() {
                n.hasClass(r) ? (t.RestoreCanvas(), n.toggleClass(
                    r), e("body").toggleClass(r)) : (t.MaximizeCanvas(),
                    n.toggleClass(r), e("body").toggleClass(
                        r), amplify.publish(
                        "webglFullscreen", {
                            id: t.containerId
                        }))
            }), e(window).on("keyup", function(t) {
                t.which == 27 && n.hasClass(r) && e(
                    "#fullscreen-toggle").click()
            })
        },
        shipviewerFullscreen: function() {
            function o() {
                n.height(function() {
                    return i.height() - s
                }), r.height(function() {
                    return i.height() - originalInnerHeight
                })
            }
            var t = e("#shipviewer-container"),
                n = e(".antiscroll-box"),
                r = e(".antiscroll-inner"),
                i = e("#shipviewer canvas"),
                s = i.height() - n.height();
            originalInnerHeight = i.height() - r.height(), e(
                "#fullscreen-toggle").click(function() {
                o()
            }), e(window).resize(function() {
                t.hasClass("fullscreen") && o()
            })
        },
        shipviewerHistoryManager: function(t, n) {
            window.history.replaceState(n, n), e(
                "#ship-list-categorized .antiscroll-inner a, #ship-list-flat .antiscroll-inner a"
            ).click(function() {
                var n = e(this),
                    r = n.attr("href"),
                    i = r.replace("/universe/spaceships/", "").replace(
                        "/", ""),
                    s = location.hash;
                return n.text() == e(
                        "#sidecontent #factsheet h2").text() ?
                    !1 : (t.selectShip(i), window.history.pushState(
                        i, i, r + s), !1)
            }), window.onpopstate = function(e) {
                e.state != null && e.state != "" && t.selectShip(e.state)
            }
        },
        setSelectedShip: function(n) {
            var r = n.name,
                i = e("#sidecontent #factsheet div"),
                s = 400;
            e(".antiscroll-inner a").parentsUntil(".antiscroll-inner").removeClass(
                "selected"), e(".antiscroll-inner a").each(function() {
                e(this).text() == r && e(this).parentsUntil(
                    ".antiscroll-inner", "ul, li").addClass(
                    "selected").show(function() {
                    t.refresh()
                })
            }), i.find("dl").length || (s = 0), i.fadeOut(s,
                function() {
                    e(this).empty(), e("#shipviewerFactsheet").tmpl(
                        n).appendTo(i), e(this).fadeIn(s)
                })
        }
    }
}(jQuery);
$(function() {
    $("body#creations").length && (creations.doMasonry(), creations.mosaicRefresh(),
            $(".oldie").length && creations.videoIEOverlay()), $(
            "body#mediadisplay .excerpt").length && creations.fictionToggle(),
        $("#subcat-listing").length && (creations.subcatPaging(), $(
            ".oldie").length && creations.videoIEOverlay());
    if ($(".download").length) {
        var e = $(".download");
        $("html").hasClass("touch") && $(document).on("touchend",
            function(t) {
                var n = $(t.target);
                if (n.hasClass("download") || n.parents(".download")
                    .length > 0) {
                    if (n.is("a")) return !0;
                    e.toggleClass("is-expanded")
                } else e.hasClass("is-expanded") && e.has(t.target)
                    .length === 0 && e.removeClass("is-expanded")
            })
    }
});
var creations = function(e) {
    return {
        doMasonry: function() {
            function r() {
                if (n) return;
                n = !0, t.masonry({
                    itemSelector: "ul#creations-mosaic > li",
                    columnWidth: 235
                })
            }
            var t = e("#creations-mosaic"),
                n = !1;
            t.imagesLoaded(function() {
                r()
            }), e(window).load(function() {
                r()
            })
        },
        subcatPaging: function() {
            e("#subcat-listing ol").creations_paging()
        },
        videoIEOverlay: function() {
            e("<span />").appendTo("li.video a")
        },
        mosaicRefresh: function() {
            e("#mosaic-refresh").click(function() {
                var t = e(this),
                    n = t.attr("href");
                return e.ajax({
                    url: n,
                    dataType: "html",
                    headers: {
                        "X-Reply-With": "CustomJSON"
                    },
                    cache: !1,
                    success: function(t) {
                        t && e(t).find(
                            "#creations-mosaic"
                        ).length && (e(
                                "#creations-mosaic"
                            ).replaceWith(e(t).find(
                                "#creations-mosaic"
                            )), creations.doMasonry(),
                            e(".oldie").length &&
                            creations.videoIEOverlay()
                        )
                    }
                }), !1
            })
        },
        fictionToggle: function() {
            var t = e("#media article .more");
            t.data("open", t.text()).click(function(t) {
                t.preventDefault();
                var n = e(this);
                n.text(n.data("open") == n.text() ? n.data(
                        "close") : n.data("open")), e(t.target.hash)
                    .slideToggle("slow")
            })
        },
        highlightSuggested: function() {
            var t = "generic",
                n = window.innerWidth > 0 ? window.innerWidth : screen.width;
            if (navigator.userAgent.match(/iPad/i) !== null) t = "ipad";
            else if (navigator.userAgent.match(/iPhone/i) !== null ||
                navigator.userAgent.match(/iPod/i) !== null) t =
                "iphone";
            e(".image-link").filter(function() {
                return e(this).data("device") === t
            }).sort(function(t, n) {
                return e(n).data("width") - e(t).data("width")
            }).each(function() {
                if (e(this).data("width") == n) return e(this).parent()
                    .addClass("is-suggested"), !1
            })
        }
    }
}(jQuery);
$(function() {
    $("body#capsuleers").length && capsuleers.frontpageTiles(), typeof capsuleersFacts !=
        "undefined" && capsuleers.doFacts()
});
var capsuleers = function(e) {
    return {
        doFacts: function() {
            function o(e) {
                return r = Math.floor(Math.random() * n.length), r ==
                    e ? o(e) : r
            }
            var n = capsuleersFacts,
                i = o(),
                s = e("#facts");
            if (!n.length) return;
            s.text(n[i]).data("current", i).fadeIn(600), t = Timed.every(
                "5s", function() {
                    s.fadeOut(600, function() {
                        var t = e(this),
                            r = o(t.data("current"));
                        e(this).text(n[r]).data("current",
                            r).fadeIn(600)
                    })
                }), s.hover(function() {
                t.cancel()
            }, function() {
                t.start()
            })
        },
        frontpageTiles: function() {
            e("#capsuleers-story-list ul").creations_paging({
                pagesize: 6,
                list_markup: '<ul class="link-tiles"></ul>',
                container: "#capsuleers-story-list",
                paging_arrows_container: ".content",
                insert_pager_after: !1
            })
        }
    }
}(jQuery);
(function(e, t, n) {
    if (n("body#expansion-new").length === 0) return;
    n(document).ready(function() {
        function r(e) {
            return e = n.trim(e), e.substr(e.length - 1) !==
                "/" ? e + "/" : e
        }

        function i(e) {
            typeof e == "function" && e();
            var t = n(".cdn-article"),
                r = n('.card[data-id="' + t.data("id") + '"]').parent(),
                i = {
                    height: t.height(),
                    width: t.width()
                };
            o(t.find(".cdn-article-content .cdn-article-title")
                    .text()), r.next().length > 0 && n(
                    ".arrow-right").removeClass("is-disabled"),
                r.prev().length > 0 && n(".arrow-left").removeClass(
                    "is-disabled"), t.removeClass("is-hidden").addClass(
                    "is-partially-hidden is-shrinked").animate({
                    height: i.height + "px",
                    width: i.width + "px"
                }, 400, "easeInOutQuint", function() {
                    setTimeout(function() {
                        t.removeClass(
                            "is-partially-hidden is-shrinked"
                        ).removeAttr("style")
                    }, 50), setTimeout(function() {
                        var e = document.querySelectorAll(
                            ".cdn-article")[0];
                        FB.XFBML.parse(e), twttr.widgets
                            .load(e), gapi.plusone.go(
                                e)
                    }, 500), n(".l-sections").removeAttr(
                        "style")
                })
        }

        function s(e) {
            e.indexOf(expansion.url.root) !== 0 && (e =
                expansion.url.root + e.replace(expansion.url
                    .root, "")), history.pushState({
                page: e
            }, "", e), amplify.publish("ExpansionPageView", {
                path: e
            })
        }

        function o(e) {
            var t = n.trim(n("title").text().replace(
                    /(\r\n|\n|\r)/gm, "")),
                r = new RegExp("^(.* - )?(" + expansion.title +
                    ".*$)");
            n("title").text(t.replace(r, e + " - $2"))
        }
        var e = !1;
        n("body").on("click", "[data-nav]", function(e, t) {
                var r = n(this),
                    i = r.data("nav") === "primary" ? r : n(
                        "#expansion-nav").find(
                        'a[data-target="' + r.data("target") +
                        '"]'),
                    u = n(".l-sections").find(r.data("target"));
                i.hasClass("is-selected") || (n(
                    "#expansion-nav").find(
                    "a.is-selected").removeClass(
                    "is-selected"), i.addClass(
                    "is-selected"));
                if (!u.hasClass("is-selected")) {
                    var a = n(".cdn-article");
                    !a.length > 0 ? u.siblings(".is-selected").removeClass(
                        "is-selected").fadeOut(300,
                        function() {
                            u.addClass("is-selected").fadeIn(
                                300)
                        }) : a.fadeOut(300, function() {
                        n(".arrow").addClass(
                            "is-hidden"), n(
                            '.card[data-id="' + a.data(
                                "id") + '"]').removeClass(
                            "is-selected"), u.addClass(
                            "is-selected").fadeIn(
                            300), a.remove()
                    }), t !== !0 && n("html").hasClass(
                        "history") && s(this.getAttribute(
                        "href")), o(i.text())
                }
                n(window).scrollTop() < 500 && n("html, body").animate({
                    scrollTop: n("#expansion-nav").offset()
                        .top - 100
                }, "slow"), e.preventDefault()
            }).on("click", ".arrow", function(e) {
                if (n(this).hasClass("is-disabled")) {
                    e.preventDefault();
                    return
                }
                var t = n(this),
                    r = n(".cdn-article"),
                    o = n('.card[data-id="' + r.data("id") +
                        '"]'),
                    u = t.hasClass("arrow-left") ? o.parent().prev()
                    .find(".card-link") : o.parent().next().find(
                        ".card-link");
                n(".arrow").addClass("is-disabled"), o.removeClass(
                    "is-selected"), u.next(".card").addClass(
                    "is-selected"), n.ajax({
                    url: expansion.url.root +
                        "/load-cdn-article/",
                    type: "post",
                    data: {
                        channel: u.data("channel"),
                        id: u.data("id")
                    },
                    success: function(e) {
                        n(".l-sections").append(n(e)
                                .addClass(
                                    "is-hidden")),
                            i(function() {
                                n(".l-sections")
                                    .css(
                                        "min-height",
                                        n(
                                            ".l-sections"
                                        ).height()
                                    ), r.remove()
                            })
                    }
                }), n("html").hasClass("history") && s(u.attr(
                    "href")), e.preventDefault()
            }).on("click", ".card-link", function(e, t) {
                function p() {
                    if (!h) {
                        setTimeout(p, 50);
                        return
                    }
                    i(function() {
                        n(".l-sections").css(
                                "min-height", n(
                                    ".l-sections").height()
                            ), n(".arrow").addClass(
                                "is-disabled").removeClass(
                                "is-hidden"), f.hide()
                            .removeClass(
                                "is-selected"), a.removeClass(
                                "is-loading-card"),
                            o.removeAttr("style")
                    })
                }
                var r = n(this),
                    o = r.parent(),
                    u = o.find(".card"),
                    a = o.parents(".l-card-grid"),
                    f = a.parent(),
                    l = 327,
                    c = o.position().left,
                    h = !1;
                if (u.hasClass("is-selected")) {
                    e.preventDefault();
                    return
                }
                f.hasClass("is-selected") || n(
                        '[data-nav="primary"][data-target="#' +
                        f.attr("id") + '"]').trigger("click", [!
                        0]), a.addClass("is-loading-card"), u.addClass(
                        "is-selected"), n.ajax({
                        url: expansion.url.root +
                            "load-cdn-article/",
                        type: "post",
                        data: {
                            channel: r.data("channel"),
                            id: r.data("id")
                        },
                        success: function(e) {
                            n(".l-sections").append(n(e)
                                    .addClass(
                                        "is-hidden")),
                                h = !0
                        }
                    }), t !== !0 && n("html").hasClass(
                        "history") && s(this.getAttribute(
                        "href")), o.animate({
                        "margin-top": a.offset().top - u.offset()
                            .top + "px",
                        left: (c === 0 ? l : c > l ? "-" +
                            l : 0) + "px"
                    }, 400, p), (n(window).scrollTop() < 20 ||
                        n(window).scrollTop() > n(
                            "#expansion-nav").offset().top) &&
                    n("html, body").animate({
                        scrollTop: n("#expansion-nav").offset()
                            .top - 100
                    }, "slow"), e.preventDefault()
            }), expansion.url.section !== "" && n('a[href="' + r(
                expansion.url.root + expansion.url.section +
                "/" + expansion.url.content) + '"]').not(
                '[data-nav="secondary"]').trigger("click"), window.onload =
            function() {
                e = !0
            };
        var t = setInterval(function() {
            e === !0 && (window.onpopstate = function(e) {
                var t = r(window.location.pathname),
                    i = n.trim(t) === expansion.url
                    .root ? n("#expansion-nav a").eq(
                        0) : n('a[href="' + t +
                        '"]').not(
                        '[data-nav="secondary"]');
                i.trigger("click", [!0])
            }, clearInterval(t))
        }, 100)
    })
})(window, document, jQuery);
$(function() {});
var misc = function(e) {
    return {}
}(jQuery);
(function() {
    amplify.subscribe("ExpansionPageView", function(e) {}), amplify.subscribe(
        "CreateAccount", function(e) {
            switch (e.data) {
                case "success":
                    var t = document.getElementById("signupHash").innerHTML
                        .replace("<!--", "").replace("-->", "").trim();
                    dataLayer.push({
                        event: "eo-www-start-receipt-true",
                        isReceipt: "true",
                        ReceiptType: "trial",
                        ReceiptPath: "eo-www-start",
                        virtualPath: "/start/?step=Receipt",
                        UserId: t,
                        accountStatus: 14,
                        accountType: 23,
                        isEcommerce: "yes",
                        transactionCurrency: "EUR",
                        transactionId: "",
                        transactionProducts: [{
                            category: "Trial",
                            name: "14 Day Trial",
                            price: "0.00",
                            quantity: "1",
                            sku: "14DayTrial"
                        }]
                    });
                    break;
                case "failure":
                    break;
                case "ajax submit failure":
                    break;
                case "view":
                    dataLayer.push({
                        event: "eo-www-start-receipt-false",
                        isReceipt: "false",
                        ReceiptType: "trial",
                        ReceiptPath: "eo-www-start"
                    });
                    break;
                default:
            }
        }), amplify.subscribe("PAQuestion", function(e) {}), amplify.subscribe(
        "PAResult", function(e) {}), amplify.subscribe(
        "webglFullscreen", function(e) {}), amplify.subscribe(
        "SetAffiliateID", function(e) {
            dataLayer.push({
                AffiliateID: e.aid
            })
        })
})();

function stickymenu(e, t) {
    var n = $(window).scrollTop();
    n > t ? e.addClass("stick") : e.removeClass("stick")
}

function smoothScroll() {
    $("#section-menu a").click(function() {
        return $("html, body").animate({
            scrollTop: $($.attr(this, "href")).offset().top -
                25
        }, {
            duration: 500
        }), !1
    })
}
$(function() {
    smoothScroll()
}), $("body#landing").length && $("body#landing").scrollspy({
    target: "#section-menu",
    offset: 70
}), window.onload = function() {
    if ($("body").length && $("#section-menu").length) {
        var e = $("#section-menu"),
            t = e.offset().top;
        stickymenu(e, t), $(window).scroll(function() {
            stickymenu(e, t)
        }), setTimeout(function() {
            $("body").addClass("animate")
        }, 500)
    }
};